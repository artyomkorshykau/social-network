"use strict";(self.webpackChunksamurai_way=self.webpackChunksamurai_way||[]).push([[991],{7991:(e,s,a)=>{a.r(s),a.d(s,{default:()=>p});var r=a(2791),t=a(364),n=a(6716),l=a(8107);const i="AddMessageForm_AddMessageForm__BVAJs",c="AddMessageForm_textarea__fhhap";var d=a(1625),h=a(184);const o=()=>{const[e,s]=(0,r.useState)(""),a=(0,t.v9)(l.L5),o=(0,t.I0)();return(0,h.jsxs)("div",{className:i,children:[(0,h.jsx)("div",{className:c,children:(0,h.jsx)("textarea",{onChange:e=>s(e.currentTarget.value),value:e,placeholder:"Enter your message"})}),(0,h.jsx)("div",{children:(0,h.jsx)(d.ZP,{type:"primary",disabled:"pending"===a,onClick:()=>{e&&(o(n.thunks.sendMessage(e)),s(""))},children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"})})]})},u="message_message__OG3jG",g="message_userMessage__x++Jy",m="message_messageBlock__AzI+w",x=r.memo((e=>{let{message:s}=e;const a=s.userId;return(0,h.jsxs)("div",{className:29875===a?g:u,children:[(0,h.jsx)("div",{children:(0,h.jsx)("img",{src:s.photo,alt:"avatar",width:"40px"})}),(0,h.jsxs)("div",{className:m,children:[(0,h.jsx)("span",{children:s.userName}),(0,h.jsx)("p",{children:s.message})]})]})})),v="Messages_messages__gee4N",j=()=>{const e=(0,t.v9)(l.b6),s=(0,r.useRef)(null),[a,n]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{var e;a&&(null===(e=s.current)||void 0===e||e.scrollIntoView({behavior:"smooth"}))}),[e]),(0,h.jsxs)("div",{className:v,onScroll:e=>{let s=e.currentTarget;Math.abs(s.scrollHeight-s.scrollTop)-s.clientHeight<300?!a&&n(!0):a&&n(!1)},children:[e.map((e=>(0,h.jsx)(x,{message:e},e.id))),(0,h.jsx)("div",{ref:s})]})},_=()=>{const e=(0,t.I0)(),s=(0,t.v9)(l.L5);return(0,r.useEffect)((()=>(e(n.thunks.messagesListening()),()=>{e(n.thunks.stopMessagesListening())})),[]),(0,h.jsxs)("div",{children:["error"===s&&(0,h.jsx)("div",{children:"Error! Please refresh the page."}),(0,h.jsx)(j,{}),(0,h.jsx)(o,{})]})},p=()=>(0,h.jsx)("div",{children:(0,h.jsx)(_,{})})}}]);
//# sourceMappingURL=991.3f8c116a.chunk.js.map